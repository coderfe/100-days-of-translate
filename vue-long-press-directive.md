# 制作一个 Vue 长按指令

你是否曾想在 Vue 程序中创建一个只需按住几秒就可以执行一个功能的按钮？

你是否曾想创建这样一个按钮，按下它可以清除单次输入值（长按清空整个输入）？

你有过？我也是。那么你就来到了对的地方。

本文将解释如何通过按下（或按住）按钮来执行功能或者清空输入。

首先，我会讲解如何在 VanillaJS 中实现。然后，再创建 Vue 指令。

## 原理

要实现长按，用户需要按住按钮并持续几秒钟。

要在代码中实现这一点，在鼠标“单击”键按下时，我们需要在执行功能之前启动一个定时器来监听按住的时间，一旦这个时间超过我们设置的时间，就触发这个功能。

很简单！但是，首先我们需要知道用户何时按下按钮。

## 怎么做

用户点击按钮时，有两个事件会先于单击事件触发：**mousedown/mouseup**。

mousedown 事件会在按下鼠标按钮时调用，而 mouseup 会在松开按钮时调用。

我们需要做的是：

1. mousedown 事件发生时启动定时器
2. 只要 mouseup 事件在预设时间 2 秒之前执行，就将其当做是正常的单击事件。清除定时器，不执行相关函数。
